local workspace = game:GetService("Workspace")

-- دالة لتثبيت وحماية PetMover بشكل كامل
local function lockPetMover(petMover)
    if not petMover:IsA("BasePart") then return end

    -- ضبط الخصائص الأساسية
    petMover.Anchored = true
    petMover.Locked = true
    petMover.CanCollide = true
    petMover.Massless = true

    -- إعادة جميع الخصائص الأساسية فور أي محاولة تغيير
    local function enforceProperties()
        petMover.Anchored = true
        petMover.Locked = true
        petMover.CanCollide = true
        petMover.Massless = true
    end

    -- مراقبة أي تغيير على الخصائص
    local properties = {"CFrame", "Position", "Anchored", "Size", "Orientation", "Velocity", "RotVelocity"}
    for _, prop in pairs(properties) do
        petMover:GetPropertyChangedSignal(prop):Connect(function()
            if prop == "CFrame" or prop == "Position" then
                petMover.CFrame = petMover.CFrame -- إعادة الموقع
            elseif prop == "Velocity" then
                petMover.Velocity = Vector3.new(0,0,0)
            elseif prop == "RotVelocity" then
                petMover.RotVelocity = Vector3.new(0,0,0)
            else
                enforceProperties()
            end
        end)
    end
end

-- تثبيت أي PetMover موجودين
for _, model in pairs(workspace:GetChildren()) do
    if model:IsA("Model") then
        local petMover = model:FindFirstChild("PetMover")
        if petMover then
            lockPetMover(petMover)
        end
    end
end

-- مراقبة أي PetMover جديد يضاف ويثبت فوراً
workspace.DescendantAdded:Connect(function(desc)
    if desc.Name == "PetMover" and desc:IsA("BasePart") then
        lockPetMover(desc)
    end
end)
