-- âœ… LocalScript (StarterPlayerScripts)
-- Ù†Ø³Ø®Ø© Ù…ØµØºÙ‘Ø±Ø© Ø£Ù†ÙŠÙ‚Ø© ğŸ”¥ by ChatGPT & Faisal
-- ØªÙ… ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§ Ù„ØªØ¨Ù‚Ù‰ ØªØ¹Ù…Ù„ Ø¨Ø¹Ø¯ Ø§Ù„Ù…ÙˆØª

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer
local camera = workspace.CurrentCamera

-------------------------------------------------
-- ğŸ–¼ï¸ Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø© GUI Ø¹Ø§Ù…Ø©
-------------------------------------------------
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "ControlPanel"
screenGui.Parent = player:WaitForChild("PlayerGui")

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 150, 0, 60)
mainFrame.Position = UDim2.new(0.5, -75, 0.8, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
mainFrame.BorderSizePixel = 0
mainFrame.BackgroundTransparency = 0.3
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = screenGui

local uiCorner = Instance.new("UICorner")
uiCorner.CornerRadius = UDim.new(0, 10)
uiCorner.Parent = mainFrame

local layout = Instance.new("UIListLayout")
layout.FillDirection = Enum.FillDirection.Horizontal
layout.Padding = UDim.new(0, 6)
layout.HorizontalAlignment = Enum.HorizontalAlignment.Center
layout.VerticalAlignment = Enum.VerticalAlignment.Center
layout.Parent = mainFrame

-------------------------------------------------
-- ğŸ”˜ ÙˆØ¸ÙŠÙØ© Ø¥Ù†Ø´Ø§Ø¡ Ø²Ø±
-------------------------------------------------
local function createButton(name)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0, 65, 0, 40)
	btn.Text = name
	btn.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.Font = Enum.Font.SourceSansBold
	btn.TextScaled = true
	btn.Parent = mainFrame

	local corner = Instance.new("UICorner")
	corner.CornerRadius = UDim.new(0, 8)
	corner.Parent = btn

	return btn
end

local button1 = createButton("Ø®Ø§Ù†Ø© 1")
local button2 = createButton("Ø®Ø§Ù†Ø© 2")

-------------------------------------------------
-- ğŸ”¹ Ø³ÙƒØ±Ø¨Øª 1 (Ø­Ø¯ÙˆØ¯ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„)
-------------------------------------------------
local borderRunning = false
local SEARCH_RADIUS = 60
local REFRESH_INTERVAL = 0.4
local LINE_THICKNESS = 0.5
local LINE_COLOR = Color3.fromRGB(255, 0, 0)
local MAX_DISTANCE_TO_TARGET = SEARCH_RADIUS
local FOLDER_NAME = "LocalBorderLines"

local borderLabelGui = Instance.new("ScreenGui", player.PlayerGui)
borderLabelGui.Name = "ModelNameDisplay"
local borderLabel = Instance.new("TextLabel")
borderLabel.Size = UDim2.new(0, 200, 0, 35)
borderLabel.Position = UDim2.new(1, -210, 0.5, -25)
borderLabel.BackgroundTransparency = 0.3
borderLabel.BackgroundColor3 = Color3.fromRGB(30, 0, 0)
borderLabel.TextColor3 = Color3.fromRGB(255, 0, 0)
borderLabel.Font = Enum.Font.SourceSansBold
borderLabel.TextScaled = true
borderLabel.Visible = false
borderLabel.Parent = borderLabelGui

local function getOrCreateFolder()
	local f = camera:FindFirstChild(FOLDER_NAME)
	if f then f:ClearAllChildren() return f end
	f = Instance.new("Folder")
	f.Name = FOLDER_NAME
	f.Parent = camera
	return f
end

local function clearFolder()
	local f = camera:FindFirstChild(FOLDER_NAME)
	if f then f:Destroy() end
end

local function makeEdge(a, b, thickness, parent)
	local dir = (b - a)
	local dist = dir.Magnitude
	if dist <= 0.001 then return end
	local part = Instance.new("Part")
	part.Size = Vector3.new(thickness, thickness, dist)
	part.Anchored = true
	part.CanCollide = false
	part.Material = Enum.Material.Neon
	part.Color = LINE_COLOR
	part.CFrame = CFrame.new(a, b) * CFrame.new(0, 0, -dist / 2)
	part.Parent = parent
end

local function boundingBoxCorners(cf, size)
	local hx, hy, hz = size.X / 2, size.Y / 2, size.Z / 2
	local signs = {
		Vector3.new(-1,-1,-1),Vector3.new(-1,-1,1),Vector3.new(-1,1,-1),Vector3.new(-1,1,1),
		Vector3.new(1,-1,-1),Vector3.new(1,-1,1),Vector3.new(1,1,-1),Vector3.new(1,1,1)
	}
	local corners = {}
	for _, s in ipairs(signs) do
		table.insert(corners, cf:PointToWorldSpace(Vector3.new(s.X*hx, s.Y*hy, s.Z*hz)))
	end
	return corners, signs
end

local function findNearestModel()
	local root = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
	local myPos = root and root.Position or camera.CFrame.Position
	local nearest, nearestDist
	for _, obj in ipairs(workspace:GetDescendants()) do
		if obj:IsA("Model") and obj.PrimaryPart and obj ~= player.Character then
			local bbCFrame, bbSize = obj:GetBoundingBox()
			local d = (bbCFrame.Position - myPos).Magnitude
			if not nearest or (d < nearestDist and d <= MAX_DISTANCE_TO_TARGET) then
				nearest, nearestDist = {model=obj,cframe=bbCFrame,size=bbSize}, d
			end
		end
	end
	return nearest
end

local function updateBorders()
	local folder = getOrCreateFolder()
	folder:ClearAllChildren()
	local target = findNearestModel()
	if not target then borderLabel.Visible = false return end
	local cf, size = target.cframe, target.size
	local corners, signs = boundingBoxCorners(cf, size)
	for i=1,#corners do
		for j=i+1,#corners do
			local diff=0
			if signs[i].X~=signs[j].X then diff+=1 end
			if signs[i].Y~=signs[j].Y then diff+=1 end
			if signs[i].Z~=signs[j].Z then diff+=1 end
			if diff==1 then makeEdge(corners[i], corners[j], LINE_THICKNESS, folder) end
		end
	end
	borderLabel.Text = "Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„: " .. target.model.Name
	borderLabel.Visible = true
end

local function runBorders()
	while borderRunning do
		if player.Character then updateBorders() end
		task.wait(REFRESH_INTERVAL)
	end
	clearFolder()
	borderLabel.Visible = false
end

button1.MouseButton1Click:Connect(function()
	borderRunning = not borderRunning
	button1.BackgroundColor3 = borderRunning and Color3.fromRGB(0,255,0) or Color3.fromRGB(255,0,0)
	if borderRunning then task.spawn(runBorders) end
end)

-------------------------------------------------
-- ğŸ”¹ Ø³ÙƒØ±Ø¨Øª 2 (Ø¹Ø±Ø¶ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„Ù‚Ø±ÙŠØ¨Ø©)
-------------------------------------------------
local labelRunning = false
local labels = {}
local ignoreParts = {
	"Head","Torso","HumanoidRootPart","LeftHand","RightHand","LeftFoot","RightFoot",
	"LeftLowerArm","RightLowerArm","LeftLowerLeg","RightLowerLeg",
	"LeftUpperArm","RightUpperArm","LeftUpperLeg","RightUpperLeg",
	"UpperTorso","LowerTorso"
}
local radius = 35
local updateInterval = 0.1

local function isIgnored(part)
	for _, name in pairs(ignoreParts) do
		if part.Name == name then return true end
	end
	if part.Parent and part.Parent:FindFirstChild("Humanoid") then return true end
	return false
end

local function createLabel(part)
	if labels[part] then return labels[part] end
	local billboard = Instance.new("BillboardGui")
	billboard.Adornee = part
	billboard.Size = UDim2.new(0, 80, 0, 18)
	billboard.StudsOffset = Vector3.new(0, 2, 0)
	billboard.AlwaysOnTop = true
	local textLabel = Instance.new("TextLabel")
	textLabel.Parent = billboard
	textLabel.Size = UDim2.new(1, 0, 1, 0)
	textLabel.BackgroundTransparency = 1
	textLabel.TextColor3 = Color3.new(1,1,1)
	textLabel.TextScaled = true
	textLabel.Font = Enum.Font.SourceSans
	textLabel.Text = part.Name
	billboard.Parent = player.PlayerGui
	labels[part] = billboard
	return billboard
end

local function updateLabels()
	local char = player.Character
	if not char then return end
	local hrp = char:FindFirstChild("HumanoidRootPart")
	if not hrp then return end
	local nearby = {}
	for _, part in pairs(workspace:GetDescendants()) do
		if part:IsA("BasePart") and not isIgnored(part) then
			if (part.Position - hrp.Position).Magnitude <= radius then
				nearby[part] = true
				createLabel(part)
			end
		end
	end
	for part, billboard in pairs(labels) do
		if not nearby[part] then
			billboard:Destroy()
			labels[part] = nil
		end
	end
end

local function runLabels()
	while labelRunning do
		if player.Character then updateLabels() end
		task.wait(updateInterval)
	end
	for _, billboard in pairs(labels) do billboard:Destroy() end
	table.clear(labels)
end

button2.MouseButton1Click:Connect(function()
	labelRunning = not labelRunning
	button2.BackgroundColor3 = labelRunning and Color3.fromRGB(0,255,0) or Color3.fromRGB(255,0,0)
	if labelRunning then task.spawn(runLabels) end
end)

-------------------------------------------------
-- ğŸ”¹ Ø§Ø³ØªÙ…Ø±Ø§Ø± Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø¨Ø¹Ø¯ Ø§Ù„Ù…ÙˆØª
-------------------------------------------------
player.CharacterAdded:Connect(function(char)
	task.wait(0.1) -- ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ· Ù„Ù„ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„Ø´Ø®ØµÙŠØ© Ø¬Ø§Ù‡Ø²Ø©
	if borderRunning then task.spawn(runBorders) end
	if labelRunning then task.spawn(runLabels) end
end)
