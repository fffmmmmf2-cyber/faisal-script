local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- شاشة الأسماء
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "GuiNames"
screenGui.Parent = playerGui

-- دالة تتحقق إذا الاسم فيه a/b/c/d/p
local function hasWantedLetters(name)
	name = string.lower(name) -- نخليها صغيرة عشان نتحقق صح
	return string.find(name, "a") 
		or string.find(name, "b") 
		or string.find(name, "c") 
		or string.find(name, "d") 
		or string.find(name, "p")
end

-- دالة تضيف اسم
local function addName(gui)
	if not gui:IsA("GuiObject") then return end
	if not hasWantedLetters(gui.Name) then return end
	if screenGui:FindFirstChild("Name_" .. gui.Name) then return end

	local label = Instance.new("TextLabel")
	label.Name = "Name_" .. gui.Name
	label.Size = UDim2.new(0, gui.AbsoluteSize.X, 0, gui.AbsoluteSize.Y)
	label.Position = UDim2.fromOffset(gui.AbsolutePosition.X, gui.AbsolutePosition.Y)
	label.BackgroundTransparency = 1
	label.Text = gui.Name
	label.TextColor3 = Color3.fromRGB(255, 255, 255)
	label.Font = Enum.Font.SourceSansBold
	label.TextScaled = false
	label.TextSize = 10 -- 🔹 صغير مره
	label.ZIndex = 9999
	label.Parent = screenGui

	-- تحديث مكانه لو العنصر تحرك
	gui:GetPropertyChangedSignal("AbsolutePosition"):Connect(function()
		label.Position = UDim2.fromOffset(gui.AbsolutePosition.X, gui.AbsolutePosition.Y)
	end)
	gui:GetPropertyChangedSignal("AbsoluteSize"):Connect(function()
		label.Size = UDim2.new(0, gui.AbsoluteSize.X, 0, gui.AbsoluteSize.Y)
	end)
end

-- نفحص كل شيء موجود
local function scan(guiParent)
	for _, gui in ipairs(guiParent:GetDescendants()) do
		if gui:IsA("GuiObject") then
			addName(gui)
		end
	end
end

scan(playerGui)

-- أي عنصر جديد يضاف
playerGui.DescendantAdded:Connect(function(gui)
	if gui:IsA("GuiObject") then
		addName(gui)
	end
end)
