-- LocalScript: يُظهر أسماء كل الأجزاء في الماب (باستثناء جسم اللاعب)

local Players = game:GetService("Players")
local LOCAL_PLAYER = Players.LocalPlayer

-- نجيب شخصيتك
local function getCharacter()
	return LOCAL_PLAYER.Character or LOCAL_PLAYER.CharacterAdded:Wait()
end

local function isPartAllowed(part)
	-- لازم يكون BasePart + ما يكون من جسم اللاعب
	if not part:IsA("BasePart") then
		return false
	end

	local char = getCharacter()
	if char and part:IsDescendantOf(char) then
		return false
	end

	return true
end

local function makeBillboard(part)
	if part:FindFirstChild("PartNameBillboard") then return end

	local bb = Instance.new("BillboardGui")
	bb.Name = "PartNameBillboard"
	bb.Adornee = part
	bb.Size = UDim2.new(0, 90, 0, 16)
	bb.StudsOffset = Vector3.new(0, part.Size.Y * 0.5 + 0.6, 0)
	bb.AlwaysOnTop = true
	bb.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
	bb.Parent = part

	local tl = Instance.new("TextLabel")
	tl.Size = UDim2.new(1, 0, 1, 0)
	tl.BackgroundTransparency = 1
	tl.Text = part.Name
	tl.TextScaled = true
	tl.Font = Enum.Font.SourceSansBold
	tl.TextColor3 = Color3.new(1, 1, 1)
	tl.TextStrokeTransparency = 0.4
	tl.TextSize = 8 -- صغير
	tl.Parent = bb
end

-- نطبق على كل البارتات الموجودة
for _, obj in ipairs(workspace:GetDescendants()) do
	if isPartAllowed(obj) then
		makeBillboard(obj)
	end
end

-- لأي بارت جديد ينضاف
workspace.DescendantAdded:Connect(function(obj)
	if isPartAllowed(obj) then
		makeBillboard(obj)
	end
end)
