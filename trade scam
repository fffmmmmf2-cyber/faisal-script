local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")

local function isEligibleName(name)
	-- اسم مكوّن من حروف وأرقام فقط + يحتوي على رقم واحد على الأقل
	return name:match("^[A-Za-z0-9]+$") and name:match("%d") ~= nil
end

local function addNameLabel(part)
	if not part:IsA("BasePart") then return end
	if not isEligibleName(part.Name) then return end
	if part:FindFirstChild("NameBillboard") then return end

	local billboard = Instance.new("BillboardGui")
	billboard.Name = "NameBillboard"
	billboard.Adornee = part
	billboard.AlwaysOnTop = true
	billboard.Size = UDim2.new(0, 70, 0, 14)
	billboard.MaxDistance = 200
	billboard.StudsOffset = Vector3.new(0, part.Size.Y/2 + 1, 0)
	billboard.Parent = part

	local label = Instance.new("TextLabel")
	label.Size = UDim2.new(1, 0, 1, 0)
	label.BackgroundTransparency = 1
	label.TextScaled = true
	label.Font = Enum.Font.GothamSemibold
	label.Text = part.Name
	label.TextColor3 = Color3.new(1, 1, 1)
	label.TextStrokeTransparency = 0.4
	label.TextStrokeColor3 = Color3.new(0, 0, 0)
	label.Parent = billboard

	part.Destroying:Connect(function()
		if billboard then billboard:Destroy() end
	end)
end

for _, d in ipairs(Workspace:GetDescendants()) do
	addNameLabel(d)
end

Workspace.DescendantAdded:Connect(addNameLabel)

while true do
	for _, part in ipairs(Workspace:GetDescendants()) do
		-- يحدث النص فقط إذا كان البارت مؤهل ومعه Billboard
		if part:IsA("BasePart") and part:FindFirstChild("NameBillboard") and isEligibleName(part.Name) then
			local label = part.NameBillboard:FindFirstChildOfClass("TextLabel")
			if label then
				label.Text = part.Name
			end
		end
	end
	task.wait(1)
end
