pcall(function()
    local old = (gethui and gethui():FindFirstChild("Faisal_Rejoin_GUI")) or game:GetService("CoreGui"):FindFirstChild("Faisal_Rejoin_GUI")
    if old then old:Destroy() end
end)

local CoreGui = (gethui and gethui()) or game:GetService("CoreGui")
local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local StarterGui = game:GetService("StarterGui")
local LocalPlayer = Players.LocalPlayer

local screen = Instance.new("ScreenGui")
screen.Name = "Faisal_Rejoin_GUI"
screen.ResetOnSpawn = false
screen.IgnoreGuiInset = true
screen.Parent = CoreGui

local frame = Instance.new("Frame")
frame.Name = "Window"
frame.Size = UDim2.fromOffset(260, 120)
frame.Position = UDim2.new(0.5, -130, 0.5, -60)
frame.BackgroundColor3 = Color3.fromRGB(24, 24, 24)
frame.BorderSizePixel = 0
frame.Parent = screen

local uiCorner = Instance.new("UICorner", frame)
uiCorner.CornerRadius = UDim.new(0, 16)

local stroke = Instance.new("UIStroke", frame)
stroke.Thickness = 1
stroke.Transparency = 0.2

local title = Instance.new("TextLabel")
title.Parent = frame
title.Size = UDim2.new(1, -20, 0, 36)
title.Position = UDim2.fromOffset(10, 8)
title.BackgroundTransparency = 1
title.Text = "اعاده الانظمام"
title.TextScaled = true
title.Font = Enum.Font.GothamBold
title.TextColor3 = Color3.fromRGB(235, 235, 235)

local btn = Instance.new("TextButton")
btn.Parent = frame
btn.Name = "RejoinBtn"
btn.Size = UDim2.new(1, -24, 0, 50)
btn.Position = UDim2.fromOffset(12, 58)
btn.Text = "اعاده الانظمام"
btn.TextScaled = true
btn.Font = Enum.Font.GothamSemibold
btn.BackgroundColor3 = Color3.fromRGB(45, 130, 255)
btn.TextColor3 = Color3.fromRGB(255, 255, 255)

local btnCorner = Instance.new("UICorner", btn)
btnCorner.CornerRadius = UDim.new(0, 12)

local btnStroke = Instance.new("UIStroke", btn)
btnStroke.Thickness = 1
btnStroke.Transparency = 0.15

local UserInputService = game:GetService("UserInputService")
do
    local dragging, dragStart, startPos
    frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
end

pcall(function()
    StarterGui:SetCore("SendNotification", {
        Title = "Rejoin";
        Text = "جاهز اضغط زر اعاده الانظمام";
        Duration = 4;
    })
end)

local function doRejoin()
    TeleportService:Teleport(game.PlaceId, LocalPlayer)
end

btn.MouseButton1Click:Connect(doRejoin)

UserInputService.InputBegan:Connect(function(input, gpe)
    if gpe then return end
    if input.KeyCode == Enum.KeyCode.RightControl then
        screen.Enabled = not screen.Enabled
    end
end)
