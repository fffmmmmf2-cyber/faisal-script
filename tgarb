local players = game:GetService("Players")
local lp = players.LocalPlayer

local remotes = {}

local function hook(obj)
    if obj:IsA("RemoteEvent") or obj:IsA("RemoteFunction") then
        remotes[obj.Name] = obj
        print("[Found Remote]", obj:GetFullName())
        
        -- sniff
        if obj:IsA("RemoteEvent") then
            obj.OnClientEvent:Connect(function(...)
                print("[Event]",obj.Name,"<-",...)
            end)
        end
        
        if obj:IsA("RemoteFunction") then
            obj.OnClientInvoke = function(...)
                print("[Invoke]",obj.Name,"<-",...)
            end
        end
    end
end

for _,v in ipairs(game:GetDescendants()) do hook(v) end
game.DescendantAdded:Connect(hook)

-- simple replay framework
local function replay(remote,...)
    local ok,err = pcall(function()
        if remote:IsA("RemoteEvent") then
            remote:FireServer(...)
        else
            remote:InvokeServer(...)
        end
    end)
    print(ok and "[OK]" or "[ERR]",remote.Name,err or "")
end

-- auto test for players
local function testPlayers(remote)
    for _,plr in ipairs(players:GetPlayers()) do
        if plr ~= lp then
            replay(remote,plr)
        end
    end
end

-- usage example
task.delay(5,function()
    print("Testing remote on players:")
    for _,r in pairs(remotes) do
        testPlayers(r)
    end
end)
