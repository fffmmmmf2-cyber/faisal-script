-- LocalScript داخل StarterGui

local player = game.Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")

-- إنشاء GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = player:WaitForChild("PlayerGui")

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 180, 0, 100)
Frame.Position = UDim2.new(0.5, -90, 0.5, -50)
Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Frame.BackgroundTransparency = 0.4
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui

local FlyButton = Instance.new("TextButton")
FlyButton.Size = UDim2.new(0, 160, 0, 35)
FlyButton.Position = UDim2.new(0, 10, 0, 10)
FlyButton.Text = "طيران"
FlyButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
FlyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
FlyButton.Font = Enum.Font.SourceSansBold
FlyButton.TextScaled = true
FlyButton.Parent = Frame

local SpeedBox = Instance.new("TextBox")
SpeedBox.Size = UDim2.new(0, 160, 0, 30)
SpeedBox.Position = UDim2.new(0, 10, 0, 55)
SpeedBox.PlaceholderText = "كم يرتفع بالثانية (مثلاً 9)"
SpeedBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
SpeedBox.TextColor3 = Color3.fromRGB(255, 255, 255)
SpeedBox.Text = ""
SpeedBox.ClearTextOnFocus = false
SpeedBox.Font = Enum.Font.SourceSans
SpeedBox.TextScaled = true
SpeedBox.Parent = Frame

-- متغيرات
local flying = false
local bodyGyro, bodyPos

FlyButton.MouseButton1Click:Connect(function()
	if not flying then
		flying = true
		FlyButton.Text = "إيقاف الطيران"
		
		local speed = tonumber(SpeedBox.Text) or 9
		
		bodyGyro = Instance.new("BodyGyro")
		bodyGyro.MaxTorque = Vector3.new(400000, 400000, 400000)
		bodyGyro.P = 3000
		bodyGyro.CFrame = hrp.CFrame
		bodyGyro.Parent = hrp

		bodyPos = Instance.new("BodyPosition")
		bodyPos.MaxForce = Vector3.new(400000, 400000, 400000)
		bodyPos.P = 3000
		bodyPos.Position = hrp.Position
		bodyPos.Parent = hrp
		
		task.spawn(function()
			while flying do
				task.wait(0.1)
				bodyGyro.CFrame = hrp.CFrame
				bodyPos.Position = hrp.Position + Vector3.new(0, speed/10, 0)
			end
		end)
	else
		flying = false
		FlyButton.Text = "طيران"
		
		if bodyGyro then
			bodyGyro:Destroy()
			bodyGyro = nil
		end
		if bodyPos then
			bodyPos:Destroy()
			bodyPos = nil
		end
	end
end)
