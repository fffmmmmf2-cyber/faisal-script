local plr = game.Players.LocalPlayer
local char = plr.Character or plr.CharacterAdded:Wait()

local function safeFire(ev)
    coroutine.wrap(function()
        pcall(function()
            ev:FireServer(plr) -- نعطي نفسك فقط
        end)
        task.wait(0.3)
    end)()
end

local function safeInvoke(fn)
    coroutine.wrap(function()
        pcall(function()
            fn:InvokeServer(plr)
        end)
        task.wait(0.3)
    end)()
end

local function scan(container)
    for _,obj in ipairs(container:GetDescendants()) do
        if obj:IsA("RemoteEvent") then
            print("[TEST EVENT]", obj:GetFullName())
            safeFire(obj)
        elseif obj:IsA("RemoteFunction") then
            print("[TEST FUNCTION]", obj:GetFullName())
            safeInvoke(obj)
        end
    end
end

print("== Testing On Self ==")
scan(game.ReplicatedStorage)
scan(game.ReplicatedFirst)
scan(game.Workspace)
scan(game:GetService("Players"))
