-- LocalScript داخل StarterGui

local player = game.Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")

-- إنشاء GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = player:WaitForChild("PlayerGui")

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 100, 0, 50)
Frame.Position = UDim2.new(0.5, -50, 0.5, -25)
Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Frame.BackgroundTransparency = 0.4
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui

local FlyButton = Instance.new("TextButton")
FlyButton.Size = UDim2.new(0, 80, 0, 30)
FlyButton.Position = UDim2.new(0, 10, 0, 10)
FlyButton.Text = "طيران"
FlyButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
FlyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
FlyButton.Font = Enum.Font.SourceSansBold
FlyButton.TextScaled = true
FlyButton.Parent = Frame

-- المتغيرات
local flying = false
local platform = nil
local weld = nil
local bodyVelocity = nil

FlyButton.MouseButton1Click:Connect(function()
	if not flying then
		flying = true
		FlyButton.Text = "إيقاف الطيران"
		
		local speed = 15 -- سرعة ثابتة

		-- إنشاء البارت تحت اللاعب
		platform = Instance.new("Part")
		platform.Size = Vector3.new(3, 0.5, 3) -- صغر البارت شوي
		platform.Anchored = false
		platform.CanCollide = true
		platform.Transparency = 0.99 -- شبه مخفي
		platform.Color = Color3.fromRGB(60, 60, 60)
		platform.Parent = workspace
		platform.CFrame = hrp.CFrame * CFrame.new(0, -3, 0)
		
		-- لحام البارت بالرجل
		weld = Instance.new("WeldConstraint")
		weld.Part0 = platform
		weld.Part1 = hrp
		weld.Parent = platform

		-- جسم يتحكم بالسرعة
		bodyVelocity = Instance.new("BodyVelocity")
		bodyVelocity.MaxForce = Vector3.new(0, math.huge, 0)
		bodyVelocity.Velocity = Vector3.new(0, speed, 0)
		bodyVelocity.Parent = platform

		-- تحديث السرعة باستمرار لضمان الثبات
		task.spawn(function()
			while flying and bodyVelocity do
				task.wait(0.1)
				bodyVelocity.Velocity = Vector3.new(0, speed, 0)
			end
		end)

	else
		flying = false
		FlyButton.Text = "طيران"

		if bodyVelocity then
			bodyVelocity:Destroy()
			bodyVelocity = nil
		end
		if weld then
			weld:Destroy()
			weld = nil
		end
		if platform then
			platform:Destroy()
			platform = nil
		end
	end
end)
