local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
local Button = Instance.new("TextButton", ScreenGui)

Button.Size = UDim2.new(0, 110, 0, 40)
Button.Position = UDim2.new(0.4, 0, 0.05, 0)
Button.Text = "اختفاء"
Button.BackgroundColor3 = Color3.new(1, 0, 0)
Button.TextScaled = true
Button.ZIndex = 10
Button.Active = true
Button.Draggable = true

local Players = game:GetService("Players")
local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")
local cam = workspace.CurrentCamera

local toggled = false
local savedCameraCFrame

Button.MouseButton1Click:Connect(function()
	toggled = not toggled
	
	if toggled then
		-- الحالة الخضراء (اختفاء + تثبيت)
		Button.Text = "رجوع"
		Button.BackgroundColor3 = Color3.new(0, 1, 0)
		
		-- حفظ وضع الكاميرا قبل النزول
		savedCameraCFrame = cam.CFrame
		
		-- تثبيت الشخصية + نزول 15
		hrp.Anchored = true
		hrp.CFrame = hrp.CFrame * CFrame.new(0, -15, 0)

		-- تحكم كامل بالكاميرا
		player.CameraMinZoomDistance = 0
		player.CameraMaxZoomDistance = 999999
		player.CameraMode = Enum.CameraMode.Classic
		cam.CameraType = Enum.CameraType.Custom

		-- الكاميرا تبقى مكانها
		cam.CFrame = savedCameraCFrame
		
	else
		-- الحالة الحمراء (رجوع + مشي)
		Button.Text = "اختفاء"
		Button.BackgroundColor3 = Color3.new(1, 0, 0)

		-- فك التثبيت
		hrp.Anchored = false

		-- رجوع الكاميرا للوضع الطبيعي
		player.CameraMode = Enum.CameraMode.Classic
		cam.CameraType = Enum.CameraType.Custom
	end
end)
