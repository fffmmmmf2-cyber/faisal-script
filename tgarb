-- سكربت يطلع رسالة فوق راس اللاعب لما يكتب في TextBox
-- الكل يقدر يشوف الرسالة

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- لو مافي RemoteEvent ينشئ واحد
local fakeChatEvent = ReplicatedStorage:FindFirstChild("FakeChat")
if not fakeChatEvent then
	fakeChatEvent = Instance.new("RemoteEvent")
	fakeChatEvent.Name = "FakeChat"
	fakeChatEvent.Parent = ReplicatedStorage
end

local player = Players.LocalPlayer

-- ========= واجهة (Textbox) =========
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = player:WaitForChild("PlayerGui")

local textBox = Instance.new("TextBox")
textBox.Size = UDim2.new(0, 200, 0, 30)
textBox.Position = UDim2.new(0.5, -100, 1, -40)
textBox.PlaceholderText = "اكتب رسالتك هنا"
textBox.ClearTextOnFocus = true
textBox.TextScaled = true
textBox.Parent = screenGui

-- لما يضغط Enter يرسل الرسالة
textBox.FocusLost:Connect(function(enterPressed)
	if enterPressed and textBox.Text ~= "" then
		fakeChatEvent:FireServer(textBox.Text)
		textBox.Text = ""
	end
end)

-- ========= عرض الرسالة فوق الراس =========
fakeChatEvent.OnClientEvent:Connect(function(sender, message)
	if sender.Character and sender.Character:FindFirstChild("Head") then
		local billboard = Instance.new("BillboardGui")
		billboard.Size = UDim2.new(0, 200, 0, 50)
		billboard.StudsOffset = Vector3.new(0, 3, 0)
		billboard.Adornee = sender.Character.Head
		billboard.AlwaysOnTop = true
		billboard.Parent = sender.Character.Head

		local label = Instance.new("TextLabel")
		label.Size = UDim2.new(1, 0, 1, 0)
		label.BackgroundTransparency = 0.3
		label.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
		label.TextScaled = true
		label.TextColor3 = Color3.new(1, 1, 1)
		label.Font = Enum.Font.SourceSansBold
		label.Text = message
		label.Parent = billboard

		game:GetService("Debris"):AddItem(billboard, 5) -- يختفي بعد 5 ثواني
	end
end)

-- ========= جزء السيرفر (يخلي الرسالة توصل للكل) =========
if game:GetService("RunService"):IsServer() then
	fakeChatEvent.OnServerEvent:Connect(function(plr, message)
		fakeChatEvent:FireAllClients(plr, message)
	end)
end
