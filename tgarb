local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- Frame
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 220, 0, 320)
frame.Position = UDim2.new(0, 20, 0.5, -160)
frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui

-- Title
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 30)
title.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
title.Text = "قائمة اللاعبين"
title.Font = Enum.Font.SourceSansBold
title.TextColor3 = Color3.fromRGB(255,255,255)
title.TextSize = 20
title.Parent = frame

-- Holder
local listFrame = Instance.new("Frame")
listFrame.Size = UDim2.new(1, 0, 1, -30)
listFrame.Position = UDim2.new(0,0,0,30)
listFrame.BackgroundTransparency = 1
listFrame.Parent = frame

local UIListLayout = Instance.new("UIListLayout")
UIListLayout.Parent = listFrame
UIListLayout.Padding = UDim.new(0,5)

-- تحديث اللاعبين
local function refreshPlayers()
	for _, c in pairs(listFrame:GetChildren()) do
		if c:IsA("TextButton") then
			c:Destroy()
		end
	end
	
	for _, player in pairs(Players:GetPlayers()) do
		if player ~= LocalPlayer then
			local button = Instance.new("TextButton")
			button.Size = UDim2.new(1, -10, 0, 30)
			button.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
			button.TextColor3 = Color3.fromRGB(255, 255, 255)
			button.Font = Enum.Font.SourceSansBold
			button.TextSize = 18
			button.Text = player.Name
			button.Parent = listFrame
			
			button.MouseButton1Click:Connect(function()
				if player.Character and player.Character:FindFirstChild("Humanoid") then
					player.Character.Humanoid.Health = 0
					game.StarterGui:SetCore("SendNotification", {
						Title = "تم القتل ✅";
						Text = player.Name .. " مات";
						Duration = 3
					})
				end
			end)
		end
	end
end

Players.PlayerAdded:Connect(refreshPlayers)
Players.PlayerRemoving:Connect(refreshPlayers)
refreshPlayers()
